<!-- navbar.component.html -->
<nav class="navbar navbar-expand-lg fixed-top bg-white border-bottom">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center" routerLink="/">
      <svg class="text-primary me-2" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21,5c-1.11-0.35-2.33-0.5-3.5-0.5c-1.95,0-4.05,0.4-5.5,1.5c-1.45-1.1-3.55-1.5-5.5-1.5S2.45,4.9,1,6v14.65 c0,0.25,0.25,0.5,0.5,0.5c0.1,0,0.15-0.05,0.25-0.05C3.1,20.45,5.05,20,6.5,20c1.95,0,4.05,0.4,5.5,1.5c1.35-0.85,3.8-1.5,5.5-1.5 c1.65,0,3.35,0.3,4.75,1.05c0.1,0.05,0.15,0.05,0.25,0.05c0.25,0,0.5-0.25,0.5-0.5V6C22.4,5.55,21.75,5.25,21,5z"/>
      </svg>
      <span class="fs-4 fw-semibold text-primary">NovelNest</span>
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler border-0" type="button" (click)="toggleMenu()" [attr.aria-expanded]="isMenuOpen">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Content -->
    <div class="collapse navbar-collapse" [class.show]="isMenuOpen" id="navbarContent">
      <!-- Main Navigation -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" routerLink="/home">Home</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Categories
          </a>
          <ul class="dropdown-menu border-0 shadow">
            <li><a class="dropdown-item" href="#">Fiction</a></li>
            <li><a class="dropdown-item" href="#">Non-Fiction</a></li>
            <li><a class="dropdown-item" href="#">Children's Books</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">View All</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">New Releases</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Best Sellers</a>
        </li>
      </ul>

      <!-- Search Form -->
      <form class="d-none d-lg-flex me-3 flex-grow-1" style="max-width: 400px;">
        <div class="input-group">
          <span class="input-group-text border-end-0 bg-light">
            <i class="bi bi-search"></i>
          </span>
          <input type="search" class="form-control border-start-0 bg-light" placeholder="Search for books...">
        </div>
      </form>

      <!-- User Actions -->
      <div class="d-flex align-items-center gap-3">
        <!-- Wishlist -->
        <button class="btn btn-link text-dark position-relative p-1" title="Wishlist">
          <i class="bi bi-heart fs-5"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            2
          </span>
        </button>

        <!-- Cart -->
        <button class="btn btn-link text-dark position-relative p-1" title="Cart">
          <i class="bi bi-cart fs-5"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            3
          </span>
        </button>

        <!-- User Menu / Sign In -->
        <ng-container *ngIf="isAuthenticated; else signInButton">
          <div class="dropdown">
            <button class="btn btn-link text-dark dropdown-toggle d-flex align-items-center gap-2 text-decoration-none"
                    type="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false">
              <img [src]="user.avatar" [alt]="user.name" class="rounded-circle" width="32" height="32">
              <span class="d-none d-lg-inline">{{user.name}}</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end border-0 shadow">
              <li>
                <a class="dropdown-item d-flex align-items-center gap-2" routerLink="/profile">
                  <i class="bi bi-person"></i> Profile
                </a>
              </li>
              <li>
                <a class="dropdown-item d-flex align-items-center gap-2" routerLink="/orders">
                  <i class="bi bi-bag"></i> Orders
                </a>
              </li>
              <li>
                <a class="dropdown-item d-flex align-items-center gap-2" routerLink="/settings">
                  <i class="bi bi-gear"></i> Settings
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <button class="dropdown-item d-flex align-items-center gap-2 text-danger" (click)="logout()">
                  <i class="bi bi-box-arrow-right"></i> Sign Out
                </button>
              </li>
            </ul>
          </div>
        </ng-container>
        <ng-template #signInButton>
          <button class="btn btn-primary rounded-pill px-4" (click)="login()">
            Sign In
          </button>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- Mobile Search -->
  <div class="container d-lg-none mt-3 pb-3">
    <form>
      <div class="input-group">
        <span class="input-group-text border-end-0 bg-light">
          <i class="bi bi-search"></i>
        </span>
        <input type="search" class="form-control border-start-0 bg-light" placeholder="Search for books...">
      </div>
    </form>
  </div>
</nav>
